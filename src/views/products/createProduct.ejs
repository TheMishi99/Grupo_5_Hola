<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Creación de producto</title>
    <%- include("../partials/head") %>
    <script
      src="https://kit.fontawesome.com/b42ec8045a.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://kit.fontawesome.com/6d37a11b52.js"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="/css/createProduct.css" />
  </head>

  <body>
    <%- include("../partials/header") %>
    <main class="create-main">
      <div class="container_createProduct">
        <form
          class="create-form"
          action="/products"
          method="post"
          enctype="multipart/form-data"
          novalidate
        >
          <section class="register-title-form">
            <h1 class="tit-links">Crear tu producto</h1>
          </section>
          <div class="campos">
            <label for="img">Imágen:</label>
            <p class="err" id="img-err"></p>
            <input type="file" name="img" id="img"/>              
            <% if(locals.errors && errors.img){%>
              <div class="err"><%= errors.img.msg %></div>
            <%}%>
            <br />
            <label for="name">Nombre:</label>
            <p class="err" id="name-err"></p>
            <input type="text" name="name" id="name" 
            value="<%= locals.old && old.name ? old.name : "" %>" />
            <% if(locals.errors && errors.name){%>
              <div class="err"><%= errors.name.msg %></div>
            <%}%>
            <br />
            <label for="code">Código de Barra:</label>
            <p class="err" id="code-err"></p>
            <input type="text" name="code" id="code" 
            value="<%= locals.old && old.code ? old.code : "" %>" />
            <% if(locals.errors && errors.code){%>
              <div class="err"><%= errors.code.msg %></div>
            <%}%>
            <br />
            <label for="stock">Stock:</label>
            <p class="err" id="stock-err"></p>
            <input type="number" name="stock" id="stock"
            value="<%= locals.old && old.stock ? old.stock : "" %>" />
            <% if(locals.errors && errors.stock){%>
              <div class="err"><%= errors.stock.msg %></div>
            <%}%>
            <br />
            <label class="description" for="description">Descripción:</label>
            <br />
            <p class="err" id="description-err"></p>
            <textarea
              name="description"
              id="description"
              rows="4"
              required
            ><%= locals.old && old.description ? old.description : "" %></textarea>
            <% if(locals.errors && errors.description){%>
              <div class="err"><%= errors.description.msg %></div>
            <%}%>
            <br />
            <label for="elaborationDate">Fecha de Elaboración:</label>
            <p class="err" id="elaborationDate-err"></p>
            <input
              type="datetime-local"
              name="elaborationDate"
              id="elaborationDate"
              required
              value="<%= locals.old && old.elaborationDate ? old.elaborationDate : "" %>" />
              <% if(locals.errors && errors.elaborationDate){%>
                <div class="err"><%= errors.elaborationDate.msg %></div>
              <%}%>
            <br />
            <label for="expirationDate">Fecha de Expiración:</label>
            <p class="err" id="expirationDate-err"></p>
            <input
              type="datetime-local"
              name="expirationDate"
              id="expirationDate"
              value="<%= locals.old && old.expirationDate ? old.expirationDate : "" %>" />
              <% if(locals.errors && errors.elaborationDate){%>
                <div class="err"><%= errors.elaborationDate.msg %></div>
              <%}%>
            <br />
            <label for="price">Precio:</label>
            <p class="err" id="price-err"></p>
            <input type="number" name="price" id="price" 
            value="<%= locals.old && old.price ? old.price : "" %>" />
            <% if(locals.errors && errors.price){%>
              <div class="err"><%= errors.price.msg %></div>
            <%}%>
            <br />
            <label for="category_id">Categoría:</label>
            <select name="category_id" id="" required>
              <% categories.forEach(category=> { %>
              <option value="<%= category.id %>"><%= category.name %></option>
              <% }); %>
            </select>
            <br />
            <label for="discount_id">Descuento:</label>
            <select name="discount_id" id="" required>
              <% discounts.forEach(discount=> { %>
              <option value="<%= discount.id %>">
                <%= discount.description %>
              </option>
              <% }); %>
            </select>
            <br />
            <label for="brand_id">Marca:</label>
            <select name="brand_id" id="" required>
              <% brands.forEach(brand=> { %>
              <option value="<%= brand.id %>"><%= brand.name %></option>
              <% }); %>
            </select>
            <br />
          </div>
          <button type="submit" class="create-button">Crear Producto</button>
        </form>
      </div>
    </main>
    <script src="/js/products/createProduct.js"></script>
    <%- include("../partials/footer") %>
  </body>
</html>
